(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(21),t(2)),l=t(3),i=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.myFilter,onChange:e.eventHandler}))},d=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:o,onChange:c,type:"tel"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.status,t={color:"black",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"},a={};switch(e.statusType){case"":a=Object(u.a)({},t);break;case"success":a=Object(u.a)({},{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"warning":a=Object(u.a)({},{color:"orange",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"error":a=Object(u.a)({},{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;default:a=Object(u.a)({},t)}return""===n||null===n?null:r.a.createElement("div",{className:"status",style:a},n)},m=function(e){var n=e.name,t=e.number,a=e.deleteHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,n," ",t," ",r.a.createElement("button",{onClick:function(){a()}},"Delete")))},f=function(e){var n=e.newFilter,t=e.persons,a=e.deleteEntryAt,o=function(e){var t=n.toLowerCase();return e.filter(function(e){return e.name.toLowerCase().includes(t)})}(t);return r.a.createElement("div",null,o.map(function(e){return r.a.createElement(m,{key:e.name,name:e.name,number:e.number,deleteHandler:function(){return a(e.id)}})}))},b=t(4),p=t.n(b),h="/api/persons",g=function(){return p.a.get(h).then(function(e){return console.log("Retrieved server data"),e.data})},v=g,w=function(e){return p.a.post(h,e).then(function(e){return e.data})},y=function(e,n){return p.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},E=function(e){var n=p.a.delete("".concat(h,"/").concat(e));return console.log("Deleted entry at id","".concat(e)),n.then(function(){return g()})},x=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),m=Object(l.a)(c,2),b=m[0],p=m[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),x=g[0],O=g[1],j=Object(a.useState)(""),S=Object(l.a)(j,2),k=S[0],C=S[1],N=Object(a.useState)(""),T=Object(l.a)(N,2),D=T[0],F=T[1],R=Object(a.useState)(""),z=Object(l.a)(R,2),H=z[0],A=z[1];Object(a.useEffect)(function(){v().then(function(e){o(e)})},[]);var P=function(e,n){var a=t.find(function(n){return n.name===e}),r=a.id,c=Object(u.a)({},a,{number:n});console.log(c),y(r,c).then(function(e){o(t.map(function(n){return n.id!==r?n:e}))})},I=function(e,n){var a=t.find(function(n){return n.number===e}),r=a.id,c=Object(u.a)({},a,{name:n});console.log(c),y(r,c).then(function(e){o(t.map(function(n){return n.id!==r?n:e}))}).catch(function(e){console.log(e),F("The entry for '".concat(n,"' was already deleted from the server")),A("error"),setTimeout(function(){F(null)},5e3),o(t.filter(function(e){return e.id!==r}))})};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{status:D,statusType:H}),r.a.createElement(i,{myFilter:k,eventHandler:function(e){C(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n=void 0!==t.find(function(e){return e.name===b}),a=void 0!==t.find(function(e){return e.number===x});if(n&&a&&""!==x)alert("".concat(b," and ").concat(x," is already added to the phonebook. ")+"Please edit only one existing value at a time"),p(""),O("");else if(n&&!a)window.confirm("".concat(b," is already added to the phonebook. ")+"Do you want to update ".concat(b,"'s number?"))&&(P(b,x),F("Updated ".concat(b,"'s number to ").concat(x)),A("success"),setTimeout(function(){F(null)},5e3),O("")),p("");else if(a&&!n&&""!==x)window.confirm("".concat(x," is already added to the phonebook. ")+"Do you want to update ".concat(x,"'s owner?"))&&(I(x,b),F("Updated ".concat(x,"'s owner to ").concat(b)),A("success"),setTimeout(function(){F(null)},5e3),p("")),O("");else if(n&&""===x)alert("".concat(b," is already added to the phonebook. ")+"Provide a phone number to update ".concat(b,"'s entry, ")+"or create an entry with a different name."),p(""),O("");else if(a||""!==b){var r={name:b,number:x,date:(new Date).toISOString()};w(r).then(function(e){o(t.concat(e))}),F("Added ".concat(b)),A("success"),setTimeout(function(){F(null)},5e3),p(""),O("")}else alert("You need a name with that number!")},newName:b,handleNameChange:function(e){p(e.target.value)},newNumber:x,handleNumberChange:function(e){O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{newFilter:k,persons:t,deleteEntryAt:function(e){var n=t.find(function(n){return n.id=e}).name;console.log(n),window.confirm("Do you really want to delete this entry? ('".concat(n,")'"))&&(E(e).then(function(e){console.log("entries retreived after deletion",t),o(e)}),console.log(n),F("The entry for '".concat(n,"' was successfully removed from the server")),A("warning"),setTimeout(function(){F(null)},5e3))}}))};c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.fe5a8bd0.chunk.js.map