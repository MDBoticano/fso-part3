(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),o=t.n(a),r=t(14),c=t.n(r),u=(t(21),t(2)),l=t(3),i=function(e){return o.a.createElement("div",null,"filter shown with ",o.a.createElement("input",{value:e.myFilter,onChange:e.eventHandler}))},d=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,r=e.newNumber,c=e.handleNumberChange;return o.a.createElement("form",{onSubmit:n},o.a.createElement("div",null,"name: ",o.a.createElement("input",{value:t,onChange:a})),o.a.createElement("div",null,"number:",o.a.createElement("input",{value:r,onChange:c,type:"tel"})),o.a.createElement("div",null,o.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.status,t={color:"black",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"},a={};switch(e.statusType){case"":a=Object(u.a)({},t);break;case"success":a=Object(u.a)({},{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"warning":a=Object(u.a)({},{color:"orange",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"error":a=Object(u.a)({},{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;default:a=Object(u.a)({},t)}return""===n||null===n?null:o.a.createElement("div",{className:"status",style:a},n)},f=function(e){var n=e.name,t=e.number,a=e.deleteHandler;return o.a.createElement(o.a.Fragment,null,o.a.createElement("div",null,n," ",t," ",o.a.createElement("button",{onClick:function(){a()}},"Delete")))},m=function(e){var n=e.newFilter,t=e.persons,a=e.deleteEntryAt,r=function(e){var t=n.toLowerCase();return e.filter(function(e){return e.name.toLowerCase().includes(t)})}(t);return o.a.createElement("div",null,r.map(function(e){return o.a.createElement(f,{key:e.name,name:e.name,number:e.number,deleteHandler:function(){return a(e.id)}})}))},p=t(4),b=t.n(p),h="/api/persons",g=function(){return b.a.get(h).then(function(e){return console.log("Retrieved server data"),e.data})},y=g,v=function(e){return b.a.post(h,e).then(function(e){return e.data})},w=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},E=function(e){var n=b.a.delete("".concat(h,"/").concat(e));return console.log("Deleted entry at id","".concat(e)),n.then(function(){return g()})},x=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],r=n[1],c=Object(a.useState)(""),f=Object(l.a)(c,2),p=f[0],b=f[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),x=g[0],O=g[1],j=Object(a.useState)(""),S=Object(l.a)(j,2),k=S[0],N=S[1],T=Object(a.useState)(""),C=Object(l.a)(T,2),D=C[0],F=C[1],A=Object(a.useState)(""),R=Object(l.a)(A,2),z=R[0],H=R[1];Object(a.useEffect)(function(){y().then(function(e){r(e)})},[]);var U=function(e,n){var a=t.find(function(n){return n.name===e}),o=a.id,c=Object(u.a)({},a,{number:n});console.log(c),console.log("Updating entry in frontend: App.js updateNumberOf()"),w(o,c).then(function(e){r(t.map(function(n){return n.id!==o?n:e}))}).then(function(){console.log("Successfully updated phone number of entry"),F("Updated ".concat(p,"'s number to ").concat(x)),H("success"),setTimeout(function(){F(null)},5e3)}).catch(function(e){console.log("Failed to update phone number of entry"),console.log(e.response.data.error),F(e.response.data.error),H("error"),setTimeout(function(){F(null)},5e3)})},P=function(e,n){var a=t.find(function(n){return n.number===e}),o=a.id,c=Object(u.a)({},a,{name:n});console.log(c),console.log("Updating entry in frontend: App.js updateNameOf()"),w(o,c).then(function(e){r(t.map(function(n){return n.id!==o?n:e}))}).then(function(){console.log("Successfully updated name number of phone number entry"),F("Updated ".concat(x,"'s owner to ").concat(p)),H("success"),setTimeout(function(){F(null)},5e3)}).catch(function(e){console.log("Failed to update name of phone number entry"),console.log(e),console.log(e.response.data.error),"ValidationError"!==e.response.data.error.type?(F(e.response.data.error),H("error"),setTimeout(function(){F(null)},5e3)):(F("The entry for '".concat(n,"' was already deleted from the server")),H("error"),setTimeout(function(){F(null)},5e3),r(t.filter(function(e){return e.id!==o})))})};return o.a.createElement("div",null,o.a.createElement("h2",null,"Phonebook"),o.a.createElement(s,{status:D,statusType:z}),o.a.createElement(i,{myFilter:k,eventHandler:function(e){N(e.target.value)}}),o.a.createElement("h2",null,"add a new"),o.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n=void 0!==t.find(function(e){return e.name===p}),a=void 0!==t.find(function(e){return e.number===x});if(n&&a&&""!==x)alert("".concat(p," and ").concat(x," is already added to the phonebook. ")+"Please edit only one existing value at a time"),b(""),O("");else if(n&&!a)window.confirm("".concat(p," is already added to the phonebook. ")+"Do you want to update ".concat(p,"'s number?"))&&(U(p,x),O("")),b("");else if(a&&!n&&""!==x)window.confirm("".concat(x," is already added to the phonebook. ")+"Do you want to update ".concat(x,"'s owner?"))&&(P(x,p),b("")),O("");else if(n&&""===x)alert("".concat(p," is already added to the phonebook. ")+"Provide a phone number to update ".concat(p,"'s entry, ")+"or create an entry with a different name."),b(""),O("");else if(a||""!==p){var o={name:p,number:x,date:(new Date).toISOString()};v(o).then(function(e){r(t.concat(e))}).then(function(){console.log("Successfully added ".concat(p)),F("Added ".concat(p)),H("success"),setTimeout(function(){F(null)},5e3)}).catch(function(e){console.log(e.response.data),F(e.response.data.error),H("error"),setTimeout(function(){F(null)},5e3)}),b(""),O("")}else alert("You need a name with that number!")},newName:p,handleNameChange:function(e){b(e.target.value)},newNumber:x,handleNumberChange:function(e){O(e.target.value)}}),o.a.createElement("h2",null,"Numbers"),o.a.createElement(m,{newFilter:k,persons:t,deleteEntryAt:function(e){var n=t.find(function(n){return n.id=e}).name;console.log(n),window.confirm("Do you really want to delete '".concat(n,"''s entry? "))&&(E(e).then(function(e){console.log("entries retreived after deletion",t),r(e)}),console.log(n),F("The entry for '".concat(n,"' was successfully removed from the server")),H("warning"),setTimeout(function(){F(null)},5e3))}}))};c.a.render(o.a.createElement(x,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.4957ca0f.chunk.js.map