(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{15:function(e,n,t){e.exports=t(39)},21:function(e,n,t){},39:function(e,n,t){"use strict";t.r(n);var a=t(0),r=t.n(a),o=t(14),c=t.n(o),u=(t(21),t(2)),l=t(3),i=function(e){return r.a.createElement("div",null,"filter shown with ",r.a.createElement("input",{value:e.myFilter,onChange:e.eventHandler}))},d=function(e){var n=e.handleSubmit,t=e.newName,a=e.handleNameChange,o=e.newNumber,c=e.handleNumberChange;return r.a.createElement("form",{onSubmit:n},r.a.createElement("div",null,"name: ",r.a.createElement("input",{value:t,onChange:a})),r.a.createElement("div",null,"number:",r.a.createElement("input",{value:o,onChange:c,type:"tel"})),r.a.createElement("div",null,r.a.createElement("button",{type:"submit"},"add")))},s=function(e){var n=e.status,t={color:"black",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"},a={};switch(e.statusType){case"":a=Object(u.a)({},t);break;case"success":a=Object(u.a)({},{color:"green",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"warning":a=Object(u.a)({},{color:"orange",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;case"error":a=Object(u.a)({},{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",margin:"0 5px 10px 5px"});break;default:a=Object(u.a)({},t)}return""===n||null===n?null:r.a.createElement("div",{className:"status",style:a},n)},m=function(e){var n=e.name,t=e.number,a=e.deleteHandler;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,n," ",t," ",r.a.createElement("button",{onClick:function(){a()}},"Delete")))},f=function(e){var n=e.newFilter,t=e.persons,a=e.deleteEntryAt,o=function(e){var t=n.toLowerCase();return e.filter(function(e){return e.name.toLowerCase().includes(t)})}(t);return r.a.createElement("div",null,o.map(function(e){return r.a.createElement(m,{key:e.name,name:e.name,number:e.number,deleteHandler:function(){return a(e.id)}})}))},p=t(4),b=t.n(p),h="/api/persons",g=function(){return b.a.get(h).then(function(e){return console.log("Retrieved server data"),e.data})},v=g,y=function(e){return b.a.post(h,e).then(function(e){return e.data})},w=function(e,n){return b.a.put("".concat(h,"/").concat(e),n).then(function(e){return e.data})},E=function(e){var n=b.a.delete("".concat(h,"/").concat(e));return console.log("Deleted entry at id","".concat(e)),n.then(function(){return g()})},x=function(){var e=Object(a.useState)([]),n=Object(l.a)(e,2),t=n[0],o=n[1],c=Object(a.useState)(""),m=Object(l.a)(c,2),p=m[0],b=m[1],h=Object(a.useState)(""),g=Object(l.a)(h,2),x=g[0],O=g[1],j=Object(a.useState)(""),S=Object(l.a)(j,2),k=S[0],N=S[1],C=Object(a.useState)(""),T=Object(l.a)(C,2),D=T[0],A=T[1],F=Object(a.useState)(""),R=Object(l.a)(F,2),z=R[0],H=R[1];Object(a.useEffect)(function(){v().then(function(e){o(e)})},[]);var U=function(e,n){var a=t.find(function(n){return n.name===e}),r=a.id,c=Object(u.a)({},a,{number:n});console.log(c),console.log("Updating entry in frontend: App.js updateNumberOf()"),w(r,c).then(function(e){o(t.map(function(n){return n.id!==r?n:e}))})},P=function(e,n){var a=t.find(function(n){return n.number===e}),r=a.id,c=Object(u.a)({},a,{name:n});console.log(c),w(r,c),console.log("Updating entry in frontend: App.js updateNameOf()").then(function(e){o(t.map(function(n){return n.id!==r?n:e}))}).catch(function(e){console.log(e),A("The entry for '".concat(n,"' was already deleted from the server")),H("error"),setTimeout(function(){A(null)},5e3),o(t.filter(function(e){return e.id!==r}))})};return r.a.createElement("div",null,r.a.createElement("h2",null,"Phonebook"),r.a.createElement(s,{status:D,statusType:z}),r.a.createElement(i,{myFilter:k,eventHandler:function(e){N(e.target.value)}}),r.a.createElement("h2",null,"add a new"),r.a.createElement(d,{handleSubmit:function(e){e.preventDefault();var n=void 0!==t.find(function(e){return e.name===p}),a=void 0!==t.find(function(e){return e.number===x});if(n&&a&&""!==x)alert("".concat(p," and ").concat(x," is already added to the phonebook. ")+"Please edit only one existing value at a time"),b(""),O("");else if(n&&!a)window.confirm("".concat(p," is already added to the phonebook. ")+"Do you want to update ".concat(p,"'s number?"))&&(U(p,x),A("Updated ".concat(p,"'s number to ").concat(x)),H("success"),setTimeout(function(){A(null)},5e3),O("")),b("");else if(a&&!n&&""!==x)window.confirm("".concat(x," is already added to the phonebook. ")+"Do you want to update ".concat(x,"'s owner?"))&&(P(x,p),A("Updated ".concat(x,"'s owner to ").concat(p)),H("success"),setTimeout(function(){A(null)},5e3),b("")),O("");else if(n&&""===x)alert("".concat(p," is already added to the phonebook. ")+"Provide a phone number to update ".concat(p,"'s entry, ")+"or create an entry with a different name."),b(""),O("");else if(a||""!==p){var r={name:p,number:x,date:(new Date).toISOString()};y(r).then(function(e){o(t.concat(e))}).then(function(){console.log("Successfully added ".concat(p)),A("Added ".concat(p)),H("success"),setTimeout(function(){A(null)},5e3)}).catch(function(e){console.log(e.response.data),A(e.response.data.error),H("error"),setTimeout(function(){A(null)},5e3)}),b(""),O("")}else alert("You need a name with that number!")},newName:p,handleNameChange:function(e){b(e.target.value)},newNumber:x,handleNumberChange:function(e){O(e.target.value)}}),r.a.createElement("h2",null,"Numbers"),r.a.createElement(f,{newFilter:k,persons:t,deleteEntryAt:function(e){var n=t.find(function(n){return n.id=e}).name;console.log(n),window.confirm("Do you really want to delete this entry? ('".concat(n,")'"))&&(E(e).then(function(e){console.log("entries retreived after deletion",t),o(e)}),console.log(n),A("The entry for '".concat(n,"' was successfully removed from the server")),H("warning"),setTimeout(function(){A(null)},5e3))}}))};c.a.render(r.a.createElement(x,null),document.getElementById("root"))}},[[15,1,2]]]);
//# sourceMappingURL=main.a2f9e408.chunk.js.map